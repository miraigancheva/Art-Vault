{% extends "base.html" %}
{% block title %}{{ artwork.title }}{% endblock %}

{% block content %}
<div class="page-hero">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'home' %}" class="text-warning">Home</a></li>
        <li class="breadcrumb-item"><a href="{% url 'artworks:list' %}" class="text-warning">Artworks</a></li>
        <li class="breadcrumb-item active text-light">{{ artwork.title }}</li>
      </ol>
    </nav>
    <h1 class="fw-bold">{{ artwork.title }}</h1>
    <p class="mb-0 text-secondary">{{ artwork.year_created }} · {{ artwork.medium }}</p>
  </div>
</div>

<div class="container py-5">
  <div class="row g-4">
    <!-- Image -->
    <div class="col-lg-6">
      {% if artwork.image_url %}
      <img src="{{ artwork.image_url }}" alt="{{ artwork.title }}"
           class="img-fluid rounded shadow" style="max-height:500px; width:100%; object-fit:contain; background:#f8f5ef;">
      {% else %}
      <div class="d-flex align-items-center justify-content-center rounded bg-light shadow"
           style="height:400px;">
        <div class="text-center text-muted">
          <i class="bi bi-image" style="font-size:5rem;"></i>
          <p class="mt-3">No image available</p>
        </div>
      </div>
      {% endif %}
    </div>

    <!-- Details -->
    <div class="col-lg-6">
      <div class="d-flex gap-2 mb-3 flex-wrap">
        {% if artwork.category %}
        <span class="badge rounded-pill fs-6" style="background-color:{{ artwork.category.colour_hex }};">
          {{ artwork.category.name }}
        </span>
        {% endif %}
        {% if artwork.is_on_display %}
        <span class="badge bg-success fs-6">On Display</span>
        {% else %}
        <span class="badge bg-secondary fs-6">Not on Display</span>
        {% endif %}
      </div>

      <table class="table table-sm table-borderless mb-4">
        <tr>
          <th class="text-muted small" style="width:140px;">Artist</th>
          <td>
            <a href="{% url 'artists:detail' artwork.artist.pk %}" class="text-decoration-none fw-semibold">
              {{ artwork.artist.name }}
            </a>
          </td>
        </tr>
        <tr>
          <th class="text-muted small">Year Created</th>
          <td>{{ artwork.year_created }}</td>
        </tr>
        <tr>
          <th class="text-muted small">Medium</th>
          <td>{{ artwork.medium }}</td>
        </tr>
        {% if artwork.dimensions %}
        <tr>
          <th class="text-muted small">Dimensions</th>
          <td>{{ artwork.dimensions }}</td>
        </tr>
        {% endif %}
        <tr>
          <th class="text-muted small">Estimated Value</th>
          <td>{{ artwork.get_value_display }}</td>
        </tr>
      </table>

      <h5 class="fw-bold mb-2">Description</h5>
      <p class="lh-lg">{{ artwork.description }}</p>

      {% if artwork.exhibitions.exists %}
      <h6 class="fw-bold mt-4 mb-2">Featured in Exhibitions</h6>
      <ul class="list-unstyled">
        {% for exhibition in artwork.exhibitions.all %}
        <li class="mb-1">
          <a href="{% url 'exhibitions:detail' exhibition.pk %}" class="text-decoration-none">
            <i class="bi bi-easel2 me-1 text-warning"></i>{{ exhibition.title }}
          </a>
        </li>
        {% endfor %}
      </ul>
      {% endif %}

      <div class="d-flex gap-2 mt-4">
        <a href="{% url 'artworks:update' artwork.pk %}" class="btn btn-gold">
          <i class="bi bi-pencil me-1"></i>Edit
        </a>
        <a href="{% url 'artworks:delete' artwork.pk %}" class="btn btn-outline-danger">
          <i class="bi bi-trash me-1"></i>Delete
        </a>
        <a href="{% url 'artworks:list' %}" class="btn btn-outline-secondary ms-auto">← Back</a>
      </div>
    </div>
  </div>

  <!-- Related artworks -->
  {% if related_artworks %}
  <hr class="my-5">
  <h4 class="fw-bold mb-4">More by {{ artwork.artist.name }}</h4>
  <div class="row g-3">
    {% for related in related_artworks %}
    <div class="col-6 col-md-3">
      <div class="card h-100">
        {% if related.image_url %}
        <img src="{{ related.image_url }}" alt="{{ related.title }}" class="artwork-img card-img-top">
        {% else %}
        <div class="artwork-img card-img-top bg-light d-flex align-items-center justify-content-center">
          <i class="bi bi-image text-secondary" style="font-size:2rem;"></i>
        </div>
        {% endif %}
        <div class="card-body p-2">
          <p class="small fw-bold mb-0">{{ related.title }}</p>
          <p class="small text-muted mb-0">{{ related.year_created }}</p>
        </div>
        <div class="card-footer bg-transparent p-2">
          <a href="{% url 'artworks:detail' related.pk %}" class="btn btn-sm btn-outline-dark w-100">View</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}
</div>
{% endblock %}
